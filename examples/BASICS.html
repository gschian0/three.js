<!DOCTYPE html>
<html lang="en">
	<head>
		
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link type="text/css" rel="stylesheet" href="main.css">
	</head>
	<body>

		<div id="container"></div>
		<div id="info">
		
        </div>
        
    </body>

	<script type="module">

import * as THREE from '../build/three.module.js';
import { OrbitControls } from './jsm/controls/OrbitControls.js';
            
var scene, camera, renderer,clock;
let controls;
const maxBlocks = 20;
let boxMesh = [];
let group = new THREE.Group();
let maxIts = 300;
let flotah;

init();
for (let i = -maxIts/2; i< maxIts/2; i+= 2){
setupShapes(10+i,0+i,1+i,5,0+i,0+i);
// setupShapes(-10-i,-0-i,-1-i,-5,-0-i,-0-i);
// setupShapes(-20-i,-2-i,-2-i,-3,-99-i,-99-i);
// setupShapes(20+i,2+i,2+i,3,99+i,99+i);
group.clone();
}
flotah = new makeBox(30,40);
flotah.name = 'flotah';
scene.add(flotah);

update();

function init(){
  clock = new THREE.Clock();
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0);
  
    let light = new THREE.HemisphereLight( 0xffffbb, 0x080820, 1 );
    scene.add( light );
    var directionalLight = new THREE.DirectionalLight( 0xffffff, 1 );
    scene.add( directionalLight );
  
    camera = new THREE.PerspectiveCamera( 10, window.innerWidth / window.innerHeight, 1, 10000 );
    camera.position.y = 200;
    camera.position.z = 1;
    camera.position.z = 50;
    camera.position.y = 10;
    camera.lookat = (0,0,0);
    //camera.up.set( 0, 0, 1 );
    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize( window.innerWidth, window.innerHeight );
    document.body.appendChild( renderer.domElement );
    window.addEventListener( 'resize', resize, false);
    controls = new OrbitControls( camera, renderer.domElement );
} 
 function setupShapes(planesize,planepos, circlerad,circleslice,x,y){   
    scene.add(group);

  
    var plane = makePlane(planesize);
    plane.name = 'plane1';
    plane.rotation.x = Math.PI/2;
    plane.position.x = planepos;

    var circle = new makeCircle(circlerad,circleslice,x,y);
   
    group.add(circle);
    
    
    group.add(plane);
    scene.add(group);
    group.name = 'groupy';
 }
    // add sahpes

    function makeCircle(radius,slices,x,y){

        var geometry = new THREE.CircleGeometry( radius, slices );
    var material = new THREE.MeshNormalMaterial( {side: THREE.DoubleSide});
    var circle = new THREE.Mesh( geometry, material );
    circle.position.x = x;
    circle.position.y = y;

    return circle;
    }


    function makePlane(size){
    var geometry = new THREE.PlaneGeometry(size,size);
    var material = new THREE.MeshNormalMaterial({
        side: THREE.DoubleSide
    });
    var mesh = new THREE.Mesh(
        geometry,
        material
    );
    return mesh;
    }

    function makeBox(size){
    var geometry = new THREE.BoxGeometry(size,size);
    var material = new THREE.MeshNormalMaterial({
        side: THREE.DoubleSide
    });
    var mesh = new THREE.Mesh(
        geometry,
        material
    );
    return mesh;
    }

    // end shapes
    
				
				
    // controls.update();
  
  

//updates and resize
function update(){
    requestAnimationFrame( update );
    renderer.render( scene, camera );
    let groupy = scene.getObjectByName('groupy')
    let time = clock.getDelta();
    // console.log(time);
    groupy.rotation.y += 0.09;
    groupy.rotation.z -= 0.09;
    groupy.rotation.x += 0.09;
    //groupy.position.y = Math.sin(time);
    let flotah = scene.getObjectByName('flotah')
    flotah.position.y= Math.sin(time);

    
    
}

function resize(){
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize( window.innerWidth, window.innerHeight );


}

		</script>

</html>
